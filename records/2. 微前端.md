
### 微前端框架的原理，怎么实现主应用和子应用隔离的
#### 一、iframe
每个子应用单独开发部署，再通过iframe的方式嵌入到系统中，但有以下问题
1. 页面加载慢
2. 蒙层无法遮盖外部
3. 双滚动条
4. 可能的跨域问题

#### 二、组件化/联邦模块
1. 入口不统一
2. 子应用不好管控，可能无限制增加的问题

#### 三、路由拦截
将子应用的入口做一个路由映射，监听主应用路由变化、如果有对应映射将拦截子应用的请求，并渲染到主应用的对应Layout中

### 主应用与子应用的样式和脚本隔离
#### 一、样式污染
1. 二方包的话，尽量通过规范约束，比如独特业务命名前缀、CSS Modules、全局样式推荐仅主应用引入。对于三方包最好用iframe引入
2. ShadowDOM，目前存在的问题，类似Modal组件需要挂载在body上，如果指定container是ShadowDOM的话，会有无样式的问题，因为组件的css都在外层的 `<style></style>` 中

#### 二、js污染
如果微应用想要恶意污染的话基本是无法杜绝的，因此针对这种不可控的微应用建议还是通过 iframe 的方式接入。针对可控的二方应用，正常书写代码是不会有问题的

#### 三、Proxy沙箱隔离
对window对象用Proxy代理，拦截set和get，当更新window上的变量时，实际是更新了对应应用的状态池，而用get取值时也是从状态池中获取
